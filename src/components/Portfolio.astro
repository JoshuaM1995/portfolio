---
import "../styles/portfolio.scss";
import Modal from "./Modal.astro";
import PortfolioCard from "./PortfolioCard.astro";
import TitleUnderlined from "./TitleUnderlined.astro";
import { Image } from "astro:assets";
---

<section id="portfolio">
  <TitleUnderlined>Portfolio</TitleUnderlined>

  <div id="portfolio-cards">
    <!-- <PortfolioCard
      id="portfolio-card-healthcare"
      backgroundImage="https://placekitten.com/g/500/300"
    >
      Healthcare Web/Mobile Application
    </PortfolioCard>
    <PortfolioCard
      id="portfolio-card-oil-gas"
      backgroundImage="https://placekitten.com/g/500/300"
    >
      Oil & Gas Web Application
    </PortfolioCard> -->
    <PortfolioCard
      id="portfolio-card-spotalytics"
      backgroundImage="/images/projects/spotalytics.png"
    >
      Spotalytics
    </PortfolioCard>
  </div>
</section>

<Modal id="spotalytics">
  <Image
    src="/images/projects/spotalytics.png"
    alt="A bird."
    width="500"
    height="1000"
  />
  <h2>Spotalytics</h2>
  <p>
    Using React and Spotify's API, I created a web application that allows users
    to view their top artists and tracks, as well as their recently played
    songs. I also integrated Spotify's recommendation engine to allow users to
    generate a playlist based on their preferences, as well as find similar
    music to their favorite artists or albums.
  </p>
</Modal>

<script>
  import MicroModal from "micromodal";

  const spotalyticsPortfolioCard = document.getElementById(
    "portfolio-card-spotalytics"
  );

  const toggleModal = (elementId: string) => {
    const htmlElement = document.getElementsByTagName("html")[0];
    const modalElement = document.getElementById(`modal-${elementId}`);
    const isOpen = modalElement.classList.contains("is-open");

    if (isOpen) {
      htmlElement.style.overflow = "auto";
      MicroModal.close(`modal-${elementId}`);
    } else {
      htmlElement.style.overflow = "hidden";
      MicroModal.show(`modal-${elementId}`);
    }
  };

  spotalyticsPortfolioCard.addEventListener("click", () => {
    toggleModal("spotalytics");
  });
</script>
